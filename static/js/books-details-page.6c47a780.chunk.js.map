{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","pages/BookDetailsPage/BookDetailsPage.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","BookDetailsPage","state","descr","genre","id","imgUrl","title","author","handleButtonBack","props","location","history","from","routes","books","a","bookId","this","match","params","axios","get","response","setState","data","type","onClick","src","alt","name","Component"],"mappings":"mJAAe,SAASA,EAAgBC,EAAKC,EAAKC,GAYhD,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,ECVT,SAASQ,EAAQC,EAAQC,GACvB,IAAIC,EAAOR,OAAOQ,KAAKF,GAEvB,GAAIN,OAAOS,sBAAuB,CAChC,IAAIC,EAAUV,OAAOS,sBAAsBH,GACvCC,IAAgBG,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOZ,OAAOa,yBAAyBP,EAAQM,GAAKV,eAEtDM,EAAKM,KAAKC,MAAMP,EAAME,GAGxB,OAAOF,EAGM,SAASQ,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNb,EAAQL,OAAOqB,IAAS,GAAMC,SAAQ,SAAUxB,GAC9C,EAAemB,EAAQnB,EAAKuB,EAAOvB,OAE5BE,OAAOuB,0BAChBvB,OAAOwB,iBAAiBP,EAAQjB,OAAOuB,0BAA0BF,IAEjEhB,EAAQL,OAAOqB,IAASC,SAAQ,SAAUxB,GACxCE,OAAOC,eAAegB,EAAQnB,EAAKE,OAAOa,yBAAyBQ,EAAQvB,OAKjF,OAAOmB,E,6NCsDMQ,E,4MAhFbC,MAAQ,CAGNC,MAAO,KACPC,MAAO,KACPC,GAAI,KACJC,OAAQ,KACRC,MAAO,KACPC,OAAQ,M,EAsBVC,iBAAmB,WAAO,IAAD,IACO,EAAKC,MAA3BC,EADe,EACfA,SAAUC,EADK,EACLA,QAQlBA,EAAQtB,MAAa,OAARqB,QAAQ,IAARA,GAAA,UAAAA,EAAUT,aAAV,eAAiBW,OAAQC,IAAOC,OAU7CH,EAAQtB,KAAKqB,EAAST,MAAMW,O,8FApC9B,8BAAAG,EAAA,6DAEQC,EAASC,KAAKR,MAAMS,MAAMC,OAAOH,OAFzC,SAKyBI,IAAMC,IAAN,sCACUL,EADV,oBALzB,OAKQM,EALR,OAUEL,KAAKM,SAAL,eACKD,EAASE,OAXhB,gD,0EAuCA,WAAU,IAAD,EACyCP,KAAKhB,MAA7CC,EADD,EACCA,MAAOC,EADR,EACQA,MAAOE,EADf,EACeA,OAAQC,EADvB,EACuBA,MAAOC,EAD9B,EAC8BA,OAErC,OACE,gCACE,2DAA8BU,KAAKR,MAAMS,MAAMC,OAAOH,UAGtD,wBAAQS,KAAK,SAASC,QAAST,KAAKT,iBAApC,mGAKA,qBAAKmB,IAAKtB,EAAQuB,IAAKtB,IAEvB,6BAAKA,IAEL,4BAAIH,IAEJ,4BAAID,IAGHK,GAAU,iEAAWA,EAAOsB,e,GA3EPC","file":"static/js/books-details-page.6c47a780.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\nimport routes from '../../routes';\r\n\r\nclass BookDetailsPage extends Component {\r\n  state = {\r\n    // book: null,\r\n    // authorId: 1\r\n    descr: null,\r\n    genre: null,\r\n    id: null,\r\n    imgUrl: null,\r\n    title: null,\r\n    author: null,\r\n  };\r\n\r\n  // ЖИЗНЕННЫЕ ЦИКЛЫ\r\n  // для отрисовки страницы с информацией только об одной книге делаем http-запрос\r\n  async componentDidMount() {\r\n    // выносим в отдельную переменную bookId - значение this.props.match.params.bookId\r\n    const bookId = this.props.match.params.bookId;\r\n\r\n    // http-запрос делаем отдельный, для того, чтобы если не заходя на страницу и не переходя по ссылкам, если в адресной строке сразу ввести url одной книги, открылась страница с информацией о ней. В противном случае будет null или ошибка\r\n    const response = await axios.get(\r\n      `http://localhost:3000/books/${bookId}?_expand=author`,\r\n    );\r\n    // console.log(response);\r\n\r\n    this.setState({\r\n      ...response.data,\r\n    });\r\n  }\r\n\r\n  // Методы\r\n  //  Клик по Кнопке \"Вернуться назад\"\r\n  handleButtonBack = () => {\r\n    const { location, history } = this.props;\r\n    // console.log(location);\r\n    // console.log(location.state);\r\n    // console.log(location.state.from);\r\n\r\n    // если пользователь напрямую перешел на страницу одной книге, это первая страница - при клике \"Вернуться назад\" будет ошибка т.к. location.state.from - undefined. В этом случае добавляем проверку\r\n\r\n    // новый метод 2020: optional chaining (?.) - оператор state и from, || - если нет, то перекинь на routes.books\r\n    history.push(location?.state?.from || routes.books);\r\n\r\n    // (oldSchool метод)\r\n    //     if (location.state && location.state.from) {\r\n    //       return history.push(location.state.from);\r\n    //  }\r\n\r\n    // history.push(routes.books);\r\n\r\n    // При клике кладем новую запись в location (метод push - добавить новую, replace - заменить старую)  и возвращаемся обратно откуда были перенаправлены на текущую страницу\r\n    history.push(location.state.from);\r\n  };\r\n\r\n  render() {\r\n    const { descr, genre, imgUrl, title, author } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h1>THIS IS Book Detail Page {this.props.match.params.bookId}</h1>\r\n\r\n        {/* Кнопка \"Вернуться назад\". При клике кладем новую запись в location (метод push - добавить новую, replace - заменить старую)  и возвращаемся обратно на /books */}\r\n        <button type=\"button\" onClick={this.handleButtonBack}>\r\n          Вернуться назад\r\n        </button>\r\n\r\n        {/* Информация о книге */}\r\n        <img src={imgUrl} alt={title} />\r\n\r\n        <h2>{title}</h2>\r\n\r\n        <p>{genre}</p>\r\n\r\n        <p>{descr}</p>\r\n\r\n        {/* рендер по условию, если есть автор */}\r\n        {author && <p>Автор: {author.name}</p>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BookDetailsPage;\r\n"],"sourceRoot":""}